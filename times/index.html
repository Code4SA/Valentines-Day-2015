<!DOCTYPE html>
<html lang="en">
<head>
    <link href="assets/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/base.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
</head>
<body>
  <div class="container">

    <h1>Love horoscope: let the data speak</h1>
    <div class="col-md-12">
      Looking for love? The answers lie in the data
      Love has no age restriction and no matter how old you are, you can still find a partner.
      This is clear based on the latest official data on civil marriages in South Africa, which was released by Statistics South Africa earlier this week.
      <br/>
      The data offers a fascinating insight into marriage in the RSA, including the ages of couples who tied the knot. And it was especially heartwarming to discover how Golden Oldies born in the first quarter of the 20th Century found love and got married in the 21st Century.
      <br/>
      We also know that on dating sites over-optimistic men - and sometimes women â€“ often take a big fat chance and look for a match with someone much younger than themselves.
      <br/>
      So what are you chances of finding a match among people of different ages, based on the real data of people who got married in 2014?
      <br/>
      This interactive visualisation gives a quick view of civil marriages in SA in 2014. More importantly, it also lets you check the odds of you marrying a spouse of different ages based on real numbers, not the stars.
    </div>


    <div class="col-md-7"><div id="slopeChart"></div></div>
    <div class="col-md-5">
      How to play? Choose your gender (Female, left, male, right) and your own age range. So if you are a woman of 96 (yes some people that age do get married) hover the cursor over any category on the left and on the right  side you will see the age ranges in which you are most likely to find a marriage partner, based on actual weddings that took place in 2014.
      <br/>
      The figures in brackets are the number of marriages that took place in each age range in 2014 and the percentage they make up of the total marriages that year.    </div>

    <script type="text/javascript" src="libs/pym.js"></script>
    <script src="libs/d3.v3.js"></script>
    <script src="libs/slope.js"></script>

    <script type="text/javascript">
      var datacount = [  150710,  150710 ];<!--total number: women,man-->

      var data_ages=[
        ['18-20','18-20',206],
        ['18-20','20-25',121],
        ['18-20','25-30',40],
        ['18-20','30-35',15],
        ['18-20','35-40',3],
        ['18-20','40-45',2],
        ['18-20','45-50',2],
        ['20-25','18-20',1363],
        ['20-25','20-25',7443],
        ['20-25','25-30',1880],
        ['20-25','30-35',411],
        ['20-25','35-40',99],
        ['20-25','40-45',30],
        ['20-25','45-50',11],
        ['25-30','18-20',795],
        ['25-30','20-25',12215],
        ['25-30','25-30',16567],
        ['25-30','30-35',2934],
        ['25-30','35-40',580],
        ['25-30','40-45',170],
        ['25-30','45-50',40],
        ['25-30','55-60',3],
        ['25-30','60-65',2],
        ['30-35','18-20',248],
        ['30-35','20-25',4859],
        ['30-35','25-30',15852],
        ['30-35','30-35',10870],
        ['30-35','35-40',2065],
        ['30-35','40-45',438],
        ['30-35','45-50',145],
        ['30-35','55-60',3],
        ['30-35','60-65',5],
        ['35-40','18-20',66],
        ['35-40','20-25',1450],
        ['35-40','25-30',6077],
        ['35-40','30-35',10208],
        ['35-40','35-40',5928],
        ['35-40','40-45',1276],
        ['35-40','45-50',384],
        ['35-40','55-60',14],
        ['35-40','60-65',9],
        ['40-45','18-20',33],
        ['40-45','20-25',421],
        ['40-45','25-30',1983],
        ['40-45','30-35',4252],
        ['40-45','35-40',5764],
        ['40-45','40-45',3557],
        ['40-45','45-50',1045],
        ['40-45','55-60',55],
        ['40-45','60-65',15],
        ['40-45','80-85',1],
        ['45-50','18-20',13],
        ['45-50','20-25',218],
        ['45-50','25-30',921],
        ['45-50','30-35',2033],
        ['45-50','35-40',3584],
        ['45-50','40-45',4966],
        ['45-50','45-50',5803],
        ['45-50','55-60',397],
        ['45-50','60-65',106],
        ['55-60','18-20',8],
        ['55-60','20-25',25],
        ['55-60','25-30',89],
        ['55-60','30-35',220],
        ['55-60','35-40',426],
        ['55-60','40-45',736],
        ['55-60','45-50',2403],
        ['55-60','55-60',619],
        ['55-60','60-65',218],
        ['55-60','80-85',1],
        ['60-65','18-20',1],
        ['60-65','20-25',18],
        ['60-65','25-30',69],
        ['60-65','30-35',121],
        ['60-65','35-40',263],
        ['60-65','40-45',474],
        ['60-65','45-50',1861],
        ['60-65','55-60',1170],
        ['60-65','60-65',1706],
        ['60-65','80-85',19],
        ['80-85','20-25',2],
        ['80-85','25-30',1],
        ['80-85','30-35',2],
        ['80-85','35-40',2],
        ['80-85','40-45',12],
        ['80-85','45-50',36],
        ['80-85','55-60',29],
        ['80-85','60-65',155],
        ['80-85','80-85',24],
        ['95+','45-50',2],
        ['95+','55-60',1],
        ['95+','80-85',1],
      ];

      var width = 500, height = 660, margin ={b:0, t:40, l:140, r:50};

      var svg = d3.select("#slopeChart")
      .append("svg").attr('width', width).attr('height', (height + margin.b + margin.t))
      .append("g").attr("transform", "translate("+ margin.l + "," + margin.t + ")");

      var data = [
          {
              data: bP.partData(data_ages, 2, datacount),
              id: 'Region_X',
              header: ["Women", "Man", "Who marries whom"]
          },
      ];

      function drawGraphic(width) {
          bP.draw(data, svg);
      }

      var pymChild = new pym.Child({ renderCallback: drawGraphic });
    </script>
  </div>
</body>
</html>
